# Magick IRC Services
# (c) 1997-2000 Preston A. Elder <prez@magick.tm>
# (c) 1998-2000 W. King <ungod@magick.tm>
#
# NOTES:
#    - Where Magick links now is controlled in the
#      link dbase.  You must start Magick, and then
#      telnet to it (or use the X/Windows client)
#      and add any servers you wish to link to, and
#      other Services in the ServNet.

## -------------------------------------------------------------

# When speicfying TIME values in this file, the following
# should be used:
#    s = seconds, m = minutes, h = hours,
#    d = days, w = weeks, y = years
#
# You specify a value as follows:
#    120s, 2m,  4h, 240m,  3w, 21d,  1y, 365d,  etc...
# You may also combine values, as follows:
#    4w3d6h5m20s,  2y40w5d, 4h3m53s, etc...
# Even out of order if you wish:
#    30s4m7h, 3m20d5h, 1y6m4d3h5w20s, etc...
#
# Please note, there is NO months indicator, as each month
# has a different number of days from one to the next.

# When specifying SIZE values in this file, the following
# should be used:
#    b = bytes, k = kilobytes, m = megabytes,
#    g = gigabytes, t = terabytes
#
# You may specify a value as follows:
#    100b, 3k, 4m, 50g, 2t, etc...
# You may also combine values as follows:
#    4g6m8k3b, 80m26k, 100k60b, etc...
# Even out of order if you wish:
#    800b7g300k67m, 70b800m5k, etc...

## -------------------------------------------------------------

[Startup]

# Info on how we present ourselves.
SERVER_NAME     =services.magick.tm
SERVER_DESC     =Magick IRC Services
SERVICES_USER   =services
SERVICES_HOST   =magick.tm

# If this is set to TRUE, then the SERVICES_USER of each
# service will be their nickname lowercased.
OWNUSER         =FALSE

# ALL services will set this user mode.
SETMODE         =

# Linking information.  There can be as many of these as
# you like, but each entry must have a unique ID (not
# nessicarily numeric, but thats a good system!).
#
# Format is:  SERVER:PORT:PASSWORD:PRIORITY
#
# The specified server must be the REAL NAME/IP of it.
# The specified password is NON-ENCRYPTED.
# The specified priority means 'link here ONLY if all
# higher priority servers are down or failed.
REMOTE_1        =127.0.0.1:9666:password:1

# Protocol to use while linking.  IT IS IMPORTANT THAT THIS
# IS SET CORRECTLY, IF NOT SERVICES WILL NOT BE ABLE TO SEE
# PEOPLE SIGN ON, OR MAY NOT BE ABLE TO CONNECT.
#
# 0 = RFC 1459 compliant
# 1 = RFC 1459 compliant with TS8
# 10 = DALNet any version before 4.4.15
# 11 = DALNet any version after 4.4.15
# 12 = Bahamut
# 20 = UnderNet any version before 2.8.10
# 30 = Aurora
# 40 = EliteIRCD
# 50 = Relic 2.0
# 51 = Relic any version after 2.1
PROTOCOL        =11

# Services Level is how Magick determines both which
# backup services to fail to, and who to give way to.
#
# When a new set of services comes online, the current
# mains will ALWAYS fail to it if it is a lower LEVEL.
# Services will be content to remain master while only
# other services of the same (or higher) level are online,
# unless it becomes too laged or dies.  Minimum is 1.
#
# This is only the BASE LEVEL (ie. its minimum).  The
# actual failing level can be changed live depending on
# how lagged services are to their server (see below).
LEVEL           =1

# This determines how many seconds PING time from the
# network is unacceptable, and its time to relinquish
# MASTER or increase its 'failing' level temporarily.
# NOTE: The PING time is taken as an average excluding
#       the highest and lowest, as in:
# ((server pings)-(higest)-(lowest)) / ((# of servers)-2)
#
# If PING >= LAGTIME, increases level by 1, until it
# falls below it.  If PING >= LAGTIME*2 it increases
# level by 2 until it falls below, and so on.  When
# PING < LAGTIME, it will be back at its original level.
#
# When master, it will fail to one of the same level when
# PING >= LAGTIME.  It will fail to one of level+1 only
# when PING >= LAGTIME*2 (and if none of lower level is
# available), and so on.  It will take over master again
# from higher levels when it falls below the threshold
# that made it fail to them in the first place.
LAGTIME         =15s

# This will stop Magick starting up.  This is here so people
# actually read through and modify the .ini file, instead
# of trying to run with the defaults.
STOP            =TRUE

## -------------------------------------------------------------

[Services]

# List (space delimited) all aliases for
# each service that should be signed on,
# and the 'real name' displayed in whois.
# No nickname will disable the service,
# and all 'sub-services'.

# NickName maintinance service.
NickServ        =NickServ
NickServ_Name   =Nickname Service

# Real name for any nicks WE take
Enforcer_Name   =Nickname Enforcer

# Channel maintinance service.
ChanServ        =ChanServ
ChanServ_Name   =Channel Service

# Memo/news delivery service.
MemoServ        =MemoServ
MemoServ_Name   =Memo/News Service

# Operator/administrator service.
OperServ        =OperServ Magick-1
OperServ_Name   =Operator Service

# Committee maintinance service.
CommServ        =CommServ
CommServ_Name   =Committee Service

# Miscelaneous messages to users.
# The first is used for Global Messages
# This also replaces the old HelpServ
ServMsg         =Death HelpServ DevNull
ServMsg_Name    =Magick <--> User
SHOWSYNC        =TRUE

## -------------------------------------------------------------

[Files]

# All file and directory names specified in this section are
# relative to the services directory, unless an absolute path
# is specified.

# File containing Process ID.
PIDFILE         =magick.pid

# Default logging output file.  If VERBOSE is on, then
# ALL commands to services will be logged (if they are
# valid, it will NOT log CTCP or unknown commands).
LOGFILE         =magick.log
VERBOSE         =FALSE

# Output of /motd server, also displayed on telnet.
MOTDFILE        =magick.motd

# Directory where all language based files should go.
# This is where it will look for them when a language is
# set, *.lng, *.lfo and *.hlp files should be in here.
LANGDIR         =lang

# The physical file that stores all the logical db's in.
# MND stands for Magick New Database (standard extension).
DATABASE        =magick.mnd

# This sets the level of compression to apply to databases.
# Its just like gzip, 0 = off, 9 = max, 6 = default.
COMPRESSION     =6

# These options turn on/off encryption in Magick 2.0 and after.
# Enabling encryption affects:
#      - Databases
#      - Communications to the ServNet (encryption must be
#        enabled or disabled on ALL servers, with same phrase)
#      - The magick client
#
# They specified keyfile MUST be generated with the Magick Key
# Generator that is supplied with Magick 2.0 and above.
# NOTE: Key files are compile-dependant.  They must be generated
# again with the same passphrase if magick is recompiled.
#
# If you turn on encryption and the data in the key file is
# incorrect (or missing), Magick will halt (even if running).
# If you turn on encryption and the databases are NOT encrypted,
# then Magick will write the databases encrypted next save.
# If you turn off encryption, the databases are encrypted, and
# the keyfile is correct, it will disable encryption.
KEYFILE         =magick.key
ENCRYPTION      =FALSE

# These options are the DIRECTORIES to store memo's file
# attachments, users pictures, and temporary in-proegress
# file transfers.  Each storage area has a quota on how
# much space it can use (0 meaning unlimited).  This is
# NOT a hard quota, and may go over temporarily, so ensure
# this limit all up is lower than your hard quota.
PICTURE         =files/pic
PICTURE_SIZE    =0
MEMOATTACH      =files/memo
MEMOATTACH_SIZE =0
PUBLIC          =files/public
PUBLIC_SIZE     =0
TEMPDIR         =files/temp
TEMPDIR_SIZE    =0

# This sets your DCC settings, default block size (the final
# block size is determined per DCC), DCC Timeout value (ie.
# time to wait for either a connection, a data packet, or
# confirmation of our data packet being recieved before the
# DCC is closed), and the minimum and maximum BYTES PER SECOND
# to allow a DCC to send/recieve at -- 0 allows any speed DCC.
# The sample time is how long the average speed is calculated
# over for MIN/MAX thresholds (ie. 'average of last X seconds').
BLOCKSIZE       =1k
TIMEOUT         =2m
MIN_SPEED       =0
MAX_SPEED       =0
SAMPLETIME      =30s


## -------------------------------------------------------------

[Config]

# Delay (or if) between attempting to reconnect to parent
# server if server is SQUIT or parent server dies.  Set to
# 0 to disable.  First attempt will be same parent that
# died, and second (immediately after) will be other same-
# level servers (defined in link.db).
SERVER_RELINK   =5s

# SQUIT_PROTECT is the amount in seconds to allow a server
# to be missing before it will force it's users to re-ident
# when it comes back.
#
# The way SQUIT protection works, is that it see's a quit
# message with 2 linked server names in it, it then acticates
# a timer waiting for the SQUIT message.  If the SQUIT message
# for that user's server (or one of its uplinks) does not come
# before the timer (SQUIT_CANCEL seconds) is up, it signs off
# the user that indicated the 'early warning' of a SQUIT.
# ie. its fake, the user typed /quit server server.
SQUIT_PROTECT   =2m
SQUIT_CANCEL    =10s

# Delay between ACTIVE CYCLES (checking for expired
# nicknames/channels, etc).
CYCLETIME       =15m

# Delay between DATABASE SAVES.  When databases get large,
# saving them can chew CPU, and to stop this happening so
# often, you should increase this number.
SAVETIME        =1h

# Delay between HYPERACTIVE CYCLES (checking for bans that
# are too old, etc).  Keep in mind, that some of these checks
# may need to go therough every nick or channel entry. If you
# are seeing magick taking up too much load, then try setting
# this to a higher value, but DO NOT set it too high.
CHECKTIME       =5s

# Delay (in seconds) between server pings.  Services ping all
# servers to try to keep an up to date lag check.  This is how
# often to do it.
PING_FREQUENCY  =30s

# Non-Star chars needed for AKILL, CLONE and AKICK
#    3 means *.com will work, but *.au wont
#    4 means *.com wont work, need *a.com
STARTHRESH      =4

# This is the default amount of rows to return when
# a LIST command is executed, and the maximum rows
# to ever return (if it is overridden).
LISTSIZE        =50
MAXLIST         =250

# The minimum amount of 'worker' threads to keep active at
# all times, usually this is > 1 just incase one is doing
# something intensive (eg. language load), the other can keep
# working on other messages that come in.
MIN_THREADS     =2

# Low Water Mark is a number to help in the releasing of old
# threads to reduce overhead, basically the equation is
# if (((No_of_Threads - 2) * High_Water_Mark) + Low_Water_Mark
#         > No_Unprocessed_Messages && No_of_Threads > 1)
# then release a thread from the pool.
LOW_WATER_MARK   =10

# High Water Mark is a number to help in the spawning of new
# threads to handle load, basically the equation is
# if (No_of_Threads * High_Water_Mark < No_Unprocessed_Messages)
# then spawn a new thread off and add it to the pool.
HIGH_WATER_MARK  =15

# These control how to handle inbound messages that dont match
# immediately (usually because one thread has processed a message
# faster than the others).  When this happens, the message is
# put on a 'seen' list, and re-queue'd to be processed.  If the
# message has been seen > x times, it will be dropped, and action
# taken.  Below is how long to keep a message in the 'seen' list,
# and how many times to see it before taking action.
MSG_SEEN_TIME    =30s
MSG_SEEN_ACT     =10

## -------------------------------------------------------------

[NickServ]

# This indicates the type of renaming scheme services will use
# when they need to rename a user (assuming they can).  If this
# is set to TRUE, they will append to the users current nickname,
# using the SUFFIXES as append characters.  If this is set to
# FALSE, they will rename the user to whatever the setting of
# SUFFIXES and a random 5 digit number (eg. Guest01432).
APPEND_RENAME   =TRUE

# When renaming a user, it will try and add the first character
# listed below to the end of the nickname, and then two of them,
# and so on until it reaches MAXLEN, then it will try and add
# one of the second character, then two of them, etc.
SUFFIXES        =_-^`

# Number of days to keep a nick before expiring it (unless is on
# IRC Operator committee).
EXPIRE          =4w

# Number of seconds to wait for IDENT.
IDENT           =1m

# Delay (in seconds) to keep a nick taken by failed IDENT.
RELEASE         =1m

# Number of failed passwords before user is killed.
PASSFAIL        =5

# Flags to set by default (on registration).
# Also wether to FORCE the default value.  If the default
# value is forced, it will be as if the LOCK command has
# been done for all nicknames for that option.
DEF_PROTECT     =TRUE
LCK_PROTECT     =FALSE

DEF_SECURE      =FALSE
LCK_SECURE      =FALSE

DEF_NOEXPIRE    =FALSE
LCK_NOEXPIRE    =FALSE

DEF_NOMEMO      =FALSE
LCK_NOMEMO      =FALSE

DEF_PRIVATE     =FALSE
LCK_PRIVATE     =FALSE

DEF_PRIVMSG     =FALSE
LCK_PRIVMSG     =FALSE

DEF_LANGUAGE    =ENGLISH
LCK_LANGUAGE    =FALSE

# This is the maximum size of the user's picture  Set this
# to 0 to for unlimited file sizes (not recommended).
PICSIZE         =0

# Valid extensions for pictures to be stored in services.
# Set this to nothing to disable picture storage.
PICEXT          =jpg gif bmp tif

## -------------------------------------------------------------

[ChanServ]

# If this is set, then ChanServ will set mode +i on signon.
# There are two schools of thought on this.  First, people set
# JOIN on so that chanserv can 'advert' their channel with the
# whois, Second, the whois of chanserv can get HUGE.
HIDE            =FALSE

# Number of days to keep a channel before expiring it (unless
# NoExpire set by SOP).
EXPIRE          =2w

# Default AKICK reason if none specified (set on registration).
DEF_AKICK       =You have been banned from channel

# Number of failed passwords before user is killed.
PASSFAIL        =5

# How long (in seconds) to keep channel after AKICK (if empty).
CHANKEEP        =15s

# Flags to set by default (on registration).
# Also wether to FORCE the default value (or modes to force
# for MLOCK).  If the default value is forced, it will be
# as if the LOCK command has been done for all channels for
# that option (eg. forcing JOIN to false turns off join).
DEF_MLOCK       =+nt
LCK_MLOCK       =+

DEF_BANTIME     =0
LCK_BANTIME     =FALSE

DEF_PARTTIME    =0
LCK_PARTTIME    =FALSE

DEF_KEEPTOPIC   =TRUE
LCK_KEEPTOPIC   =FALSE

DEF_TOPICLOCK   =FALSE
LCK_TOPICLOCK   =FALSE

DEF_PRIVATE     =FALSE
LCK_PRIVATE     =FALSE

DEF_SECUREOPS   =FALSE
LCK_SECUREOPS   =FALSE

DEF_SECURE      =FALSE
LCK_SECURE      =FALSE

DEF_NOEXPIRE    =FALSE
LCK_NOEXPIRE    =FALSE

DEF_ANARCHY     =FALSE
LCK_ANARCHY     =FALSE

DEF_KICKONBAN   =FALSE
LCK_KICKONBAN   =FALSE

DEF_RESTRICTED  =FALSE
LCK_RESTRICTED  =FALSE

DEF_JOIN        =FALSE
LCK_JOIN        =FALSE

DEF_REVENGE     =NONE
LCK_REVENGE     =FALSE

# Minimum and Maximum settable levels.
LEVEL_MIN       =-1
LEVEL_MAX       =30

# Levels to set by default (on registration).
LVL_AUTODEOP    =-1
LVL_AUTOVOICE   =5
LVL_AUTOOP      =10
LVL_READMEMO    =0
LVL_WRITEMEMO   =15
LVL_DELMEMO     =25
LVL_GREET       =1
LVL_OVERGREET   =25
LVL_MESSAGE     =20
LVL_AKICK       =20
LVL_SUPER       =25
LVL_UNBAN       =10
LVL_ACCESS      =5
LVL_SET         =25
LVL_VIEW        =1
LVL_CMDINVITE   =5
LVL_CMDUNBAN    =10
LVL_CMDVOICE    =5
LVL_CMDOP       =10
LVL_CMDKICK     =15
LVL_CMDMODE     =15
LVL_CMDCLEAR    =20

## -------------------------------------------------------------

[MemoServ]

# How long should news articles remain (unless marked PERMANENT
# by founder).
NEWS_EXPIRE     =3w

# How long to wait before actually sending a memo, or cancelling
# it if no DCC is received when a file attachment is expected.
INFLIGHT        =2m

# How many files a user may have waiting for them before any new
# files being sent to them are rejected.  Set this to 0 to disable
# sending file attachments in memos.  Please note, this limit is
# not hard, its checked BEFORE a file transfer is stared, which
# means if two tranfers to that person are in progress, then both
# will be sent, even if that user only has 1 'available' slot.
FILES           =0

# Maximum size of each file a user may have waiting for them.
# Set this to 0 to have unlimited file sizes (not recommended).
FILESIZE        =0

## -------------------------------------------------------------

[OperServ]

# Who are the Services Admins (space-delimited,  NICKNAMES ONLY)
SERVICES_ADMIN  =PreZ Lord_Striker

# Only people who have mode +o can access OPERSERV (if off,
# anyone on the OPER/ADMIN/SOP/SADMIN committees can, even
# when not oper'd).
SECURE          =FALSE

# If this is true, only people on the OPER committee may
# set mode +o.  If the OPER committee is secure, the the
# user will have to ident before opering.
SECUREOPER      =FALSE

# Default expiry for AKILLs if no expiry time specified.
# h =hours, d =days, m =months, y =years
# and p =permanent (no number before it required).
DEF_EXPIRE      =3h

# Maximum time (in akill time format) AKILL's can be set for for
# members of the 4 hard-coded committees.
EXPIRE_OPER     =1d
EXPIRE_ADMIN    =1w
EXPIRE_SOP      =8w
EXPIRE_SADMIN   =1y

# Maximum allowable number of clons allowable with override
MAX_CLONE       =50

# Global limit of connections per host (non-overridden).
CLONE_LIMIT     =2

# Default kill reason for exceeding clone limit.
DEF_CLONE       =Maximum connections from one host exceeded

# Amount of times the same host can trigger clone protection
# from the same host, in the specified time before AKILL is
# set automatically.
CLONE_TRIGGER   =10
CLONE_TIME      =3h

# Default akill reason for exceeding clone trigger.
CLONE_AKILL     =Clone trigger exceeded, Automatic AKILL

# If FLOOD_MESSAGES messages are received in FLOOD_TIME
# seconds, then flood is triggered (user is ignored).
FLOOD_TIME      =10s
FLOOD_MSGS      =5

# Time (in seconds) to ignore user when flood triggered.
IGNORE_TIME     =20s

# Amount of temporary (timed) ignores user must have had
# before a permanent one is adopted.
IGNORE_LIMIT    =5

# Time (in seconds) to remember old flood triggers (if a
# permanent ignore hasnt been triggered).
IGNORE_REMOVE   =5m

# Mask that services ignore should use when inoring users.
#  1 - nick!*@*
#  2 - nick!user@port.host
#  3 - nick!user@*.host
#  4 - nick!*@port.host
#  5 - nick!*@*.host
#  6 - *!user@port.host
#  7 - *!user@*.host
#  8 - *!*@port.host
#  9 - *!*@*.host
IGNORE_METHOD   =8

# If this is set to TRUE, we will log every message we have
# ignored from a user (either because they have triggered
# flood protection, or been added to the ignore list).
LOG_IGNORE      =FALSE

# Magick High Traffic Mode
# Four options are used to define limits, and initial values
# for HTM.  When Magick switches to HTM, it disables or delays
# certain core features.  HTM may also be forced by SOP's.
# Automatic switching to HTM is worked out by calculating the
# bandwidth used over a set period of time, when HTM is
# activated, the gap the average is calculated over is slowly
# increased (by 2s each time) until the MAX is reached.  If
# we have not dropped below the average kb/s threshold by
# the time the MAX is reached, we will terminate the connection.
#
# The INIT_HTM_GAP is the initial time period that the HTM
# calculations are worked out over (and what it is set back to
# when HTM is turned off).  INIT_HTM_THRESH is the initial
# kb/s threshold that Magick will ensure we are below before
# activating HTM -- This may be changed online.  The MAX_HTM_GAP
# is the time limit that if the 'gap' period (ie. how long a
# period we are going to work out HTM over) reaches it and is
# still above threshold, we will terminate the connection.
# HTM_ON_GAP is the amount of seconds HTM will remain active
# when it is FORCED on (unless HTM naturally takes over).
INIT_HTM_GAP    =5s
INIT_HTM_THRESH =16k
MAX_HTM_GAP     =1m
HTM_ON_GAP      =30s

## -------------------------------------------------------------

[CommServ]

# Default values for committees -- Set by default.
DEF_SECURE      =FALSE
LCK_SECURE      =FALSE

DEF_PRIVATE     =FALSE
LCK_PRIVATE     =FALSE

DEF_OPENMEMOS   =TRUE
LCK_OPENMEMOS   =FALSE

# Note on committee names.  Changing these will not affect
# magick in any way (unless you change them to a name which
# was already taken by a committee, in which case it will be
# dropped).  However please remember that help files and
# scripts use TEXT-BASED committee names.  Which means if
# you change the below names, you must change the help files
# and any scripts you use to accomodate for this, else you
# may effectively disable most help for the committee.

# Name of 'Dynamic' committees (for LOGON memos).
ALL_NAME        =ALL
REGD_NAME       =REGD

# Name and values for DEFAULT committee.  Setting SECURE means
# members of the committee must be identified to be recognized
# as on it.  Setting PRIVATE stops it from showing up in a
# users info, and stops the general public from seeing who the
# members of a committee are (and stops it showing up in the
# list of committees).  Setting OPENMEMOS means any member of
# that committee can do a /msg CommServ MEMO <committee> <text>
SADMIN_NAME     =SADMIN
SADMIN_SECURE   =TRUE
SADMIN_PRIVATE  =FALSE
SADMIN_OPENMEMOS=TRUE

SOP_NAME        =SOP
SOP_SECURE      =TRUE
SOP_PRIVATE     =FALSE
SOP_OPENMEMOS   =TRUE

OPER_NAME       =OPER
OPER_SECURE     =TRUE
OPER_PRIVATE    =FALSE
OPER_OPENMEMOS  =TRUE

ADMIN_NAME      =ADMIN
ADMIN_SECURE    =TRUE
ADMIN_PRIVATE   =FALSE
ADMIN_OPENMEMOS =TRUE


## -------------------------------------------------------------

[ServMsg]

## -------------------------------------------------------------
# END
