<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>The Magick Handbook: Usage </TITLE>
 <LINK HREF="index-4.html" REL=next>
 <LINK HREF="index-2.html" REL=previous>
 <LINK HREF="index.html#toc3" REL=contents>
</HEAD>
<BODY>
<A HREF="index-4.html">Next</A>
<A HREF="index-2.html">Previous</A>
<A HREF="index.html#toc3">Contents</A>
<HR>
<H2><A NAME="s3">3. Usage </A></H2>

<P>
<P>
<H2><A NAME="ss3.1">3.1 Support files</A>
</H2>

<P>
<P>All files and directories listed are relative to the current
'Services Directory'. The services directory is set with the
--dir commandline option. If none is specified, it will default
to the current directory.
<P>
<PRE>
magick.ini
</PRE>
This file is included with your Magick distribution
in the docs directory.  This file must either be specified on the
commandline with the --config option, or in the services directory.
This file contains all settings that Magick II will use throughout
its execution (these can be changed and reloaded online).
<P>
<PRE>
magick.mnd
</PRE>
This is the Magick New Datafile (or mound) file.  This
stores all data that is stored by Magick.  This file is not human
readable, and is often encrypted and/or compressed.  This filename
is a setting in the magick.ini file, and may be changed.  This file
will be created if it does not exist.
<P>
<PRE>
magick.log
</PRE>
This is the logfile which logs all activity of note
that happens inside Magick.  The verbosity of this log file can
vary depending on the --debug option, or the VERBOSE config option.
This file may be zero'd without any detremental effects, or if
it is removed, the OFF and ON online commands will re-establish
the filehandle. This filename is a setting in the magick.ini file,
and may be changed.  This file is created if it doesnt exist.
<P>
<PRE>
magick.pid
</PRE>
This file indicates the process ID of the currently
running Magick on UNIX-based systems.  This may be used to easily
determine if Magick is running, and to kill a running copy. This
filename is a setting in the magick.ini file, and may be changed.
This file is overwritten on Magick startup.
<P>
<PRE>
magick.motd
</PRE>
This contains the text of the server motd that will
be displayed to any user who types /MOTD services.server in their
IRC client. This filename is a setting in the magick.ini file, and
may be changed.
<P>
<PRE>
magick.key
</PRE>
This contains the key for your databases, encrypted.
This key file should be generated with magick_keygen.  This file
may not be used by more than one set of services (unless the binaries
are copied), as each compile requires regenerating this file.  This
filename is a setting in the magick.ini file, and may be changed.
<P>
<PRE>
lang/*.lng
</PRE>
These files contain the responses Magick will send back
to users for any command, or output from any procedure.  These files
are 'tokenized', and are substituted with actual values.  The default
language file to used is set by the DEF_LANGUAGE paramater in the
magick.ini file, however languages may be set per-user.
<P>
<PRE>
lang/*.lfo
</PRE>
These files contain the log file outputs Magick will
use for all messages going to the magick.log file.  These files are
'tokenized', and are substituted with actual values.  The file that
is used is set by the DEF_LANGUAGE paramater in the magick.ini file.
<P>
<PRE>
lang/*.hlp
</PRE>
These files contain the help text that Magick uses to
respond to all HELP commands.  The default help file used is set by
the DEF_LANGUAGE paramater in the magick.ini file, however languages
may be set per-user.
<P>
<PRE>
files/pic
</PRE>
This directory is where all user's pictures are stored.
The files themselves are stored as hexidecimal numbers, with no
extension -- the map to real filenames is stored in the database.
The path name actually used is a setting in the magick.ini file.
<P>
<PRE>
files/memo
</PRE>
This directory is where all attachments are stored.
The files themselves are stored as hexidecimal numbers, with no
extension -- the map to real filenames is stored in the database.
The path name actually used is a setting in the magick.ini file.
<P>
<PRE>
files/temp
</PRE>
This directory is where all files involved in DCC
transfers (sending or receiving) are stored.  These files are
considered volatile, and if Magick is not running, can safely be
removed. The files themselves are stored as hexidecimal numbers,
with no extension. The path name actually used is a setting in the
magick.ini file.
<P>
<H2><A NAME="ss3.2">3.2 General Usage</A>
</H2>

<P>
<P>Magick once started, becomes a background process.  It accepts
a number of command-line options that override the settings of
their equivilants on load.  NOTE: If the config file is loaded
again at runtime, the settings in the config file will be used.
<P>
<BLOCKQUOTE>
--help (or -?)  Help output (summary of the below).
--dir X         Set the initial services directory.
--config X      Set the name of the config file.
--convert X     Convert another version of services databases
to Magick II format, where X is the type of
database to convert.  Currently recognized:
magick
--trace X:Y     Set the trace level on startup, equivilant of
using the OperServ TRACE SET command while
running, where X is the trace type (or ALL), and
Y is the trace level in hex.
</BLOCKQUOTE>
<P>All other command line options just override the configuration
file settings.  Below is a list of the overrides available, and
the settings they override in the configuration file.  Please see
the configuration file's comments for more information on each
option, and what it does.
<P>
<BLOCKQUOTE>
PARAMATER       SHORT   GROUP           OPTION
---------       -----   -----           ------
--name X        -n      STARTUP         SERVER_NAME
--desc X        -d      STARTUP         SERVER_DESC
--user X        -u      STARTUP         SERVICES_USER
--host X        -h      STARTUP         SERVICES_HOST
--ownuser       -o      STARTUP         OWNUSER=true
--protocol X    -P      STARTUP         PROTOCOL
--level X       -l      STARTUP         LEVEL
--lagtime X     -g      STARTUP         LAGTIME
--verbose       -v      FILES           VERBOSE=true
--log X         -L      FILES           LOGFILE
--dbase X       -D      FILES           DATABASE
--langdir X     -S      FILES           LANGDIR
--encrypt       -E      FILES           ENCRYPTION=true
--decrypt       -e      FILES           ENCRYPTION=false
--keyfile X     -K      FILES           KEYFILE
--compress X    -c      FILES           COMPRESSION
--relink X      -r      CONFIG          SERVER_RELINK
--cycle X       -t      CONFIG          CYCLETIME
--check X       -T      CONFIG          CHECKTIME
--ping X        -p      CONFIG          PING_FREQUENCY
--lwm X         -m      CONFIG          LOW_WATER_MARK
--hwm X         -M      CONFIG          HIGH_WATER_MARK
--append        -a      NICKSERV        APPEND_RENAME=true
--rename        -A      NICKSERV        APPEND_RENAME=false
--ident X       -R      NICKSERV        IDENT
--language X    -s      NICKSERV        DEF_LANGUAGE
--nodcc         -x      NICKSERV        PICEXT=  (nothing)
MEMOSERV        FILES=0
--inflight X    -f      MEMOSERV        INFLIGHT
--logignore     -i      OPERSERV        LOG_IGNORE=true
--ignore X      -I      OPERSERV        IGNORE_METHOD
</BLOCKQUOTE>
<P>
<H2><A NAME="ss3.3">3.3 Functionality</A>
</H2>

<P>
<P>Magick has 6 main services, and offers the ability to script either
added functionality to these existing services, or create totally
new services through its scripting language.  This section gives an
overview of the main functionality and purpose of the hard-coded
services.  Please note, the actual nicknames of each of the below
services may be different on each network.
<P>NickServ is a services that allows users to register their IRC
nicknames so that noone else may take them.  Users may then set
various options on their nickname record, such as privacy mode,
kill protection, etc that affect the way their nickname is
treated, and how services respond to them.  They may also set
purely informational fields in their nickname record thay is
displayed on an INFO request.  NickName registration is required
to execute many other commands in services, be added to a channel
access list, or receive memos from other users.
<P>ChanServ is a service that allows users to register a channel on
the IRC network, so that they may specify who has access to them,
and who shall be automatically kicked from them.  This not only
prevents such things as channel takeovers, but establishes a
definate 'seniority' system in the channel.  ChanServ also allows
users to set various options on their channel records, from the
purely informational that is displayed in an INFO request, to
options that change the behavior of services, and how users are
treated in a channel.  This service also offers such features as
on-join greetings, user-based greetings, etc.
<P>MemoServ is a service that allows users to send memos to other
users, or post news articles to channels.  This service also
allows such features as forwarding, or replying to memos, and
even attaching files via. DCC to memos (to other users only).
This service also intergrates with NickServ's ignore list, and
ChanServ's access list to vary the ability to send, or read
memos or news articles.
<P>CommServ is a service that maintains 'committees' or groups of
users.  These groups can be simply a list of users who have a
common interest, or can alter a user's access to certain features
of services.  You may also send memos to all members of a committee
or set logon messages for committees that all members will see
on signon.  Services has 6 'default' committees:
<PRE>
SADMIN
</PRE>
Services Adminstrators - Members of this
committee are hard-coded into the Magick
configuration file.
<PRE>
SOP
</PRE>
Services Operators - Members of this committee
are added by members of the SADMIN committee.
<PRE>
ADMIN
</PRE>
Server Administrators - Members of this committee
are added by members of the SADMIN committee.
<PRE>
OPER
</PRE>
IRC Operators - Members of this committee are
added by members of the ADMIN committee.
<PRE>
REGD
</PRE>
All Registered Users - This committee may not be
modified, and its members are dynamic.
<PRE>
ALL
</PRE>
All Users - This committee may not be modified,
and its members are dynamic.
<P>OperServ is a services that allows IRC Operators to keep control
on the network.  This service offers functions like an Automatic
Kill list, Clone Protection (and overriding), Services Ignore,
IRC Operator Denying, aswell as the ability to JUPE (fake-link)
a server, change a user or channels modes, and many more funcitons.
<P>ServMsg is mainly an informational service, users may get help,
statistics and information about services, and the network they
are connected to from this service.  This service also offers the
ability for Server Administrators to send a global message that
will be sent to all users on the network, and services operators
to offer files to users throuh the public file system.
<P>
<HR>
<A HREF="index-4.html">Next</A>
<A HREF="index-2.html">Previous</A>
<A HREF="index.html#toc3">Contents</A>
</BODY>
</HTML>
